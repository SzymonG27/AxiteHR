<div class="flex select-none">
	<!-- Sidebar -->
	<div
		#sidebar
		class="w-[20vw] lg:w-[15vw] min-h-[calc(100vh-82px)] bg-gray-50 shadow-md hidden md:block"
	>
		<div class="p-4 flex items-center">
			<span class="font-bold text-xl">{{ 'Nav_Manager_Menu' | translate }}</span>
		</div>
		<nav>
			<ul>
				<li
					class="hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
					[routerLink]="['Dashboard']"
				>
					<a class="flex items-center space-x-2 p-4">
						<span class="material-icons">home</span>
						<span class="hidden md:inline">
							{{ 'Nav_Manager_Dashboard' | translate }}
						</span>
					</a>
				</li>
				<li
					*ngIf="!userRoles.includes(UserRole.UserFromCompany)"
					class="hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
				>
					<button
						type="button"
						class="flex items-center space-x-2 w-full h-full p-4"
						(click)="toggleDropdown('Teams')"
					>
						<span class="material-icons">groups</span>
						<span class="hidden md:inline">{{ 'Nav_Manager_Team' | translate }}</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isTeamsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{ block: isTeamsExpanded, hidden: !isTeamsExpanded }"
						class="pl-6"
					>
						<li
							class="p-2 hover:bg-gray-300 cursor-pointer"
							[routerLink]="['EmployeeList']"
						>
							<a>{{ 'Nav_Manager_Team_Employees' | translate }}</a>
						</li>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Team 2</a>
						</li>
					</ul>
				</li>
				<li
					class="hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
				>
					<button
						type="button"
						class="flex items-center space-x-2 w-full h-full p-4"
						(click)="toggleDropdown('Projects')"
						(keypress)="toggleDropdown('Projects')"
					>
						<span class="material-icons">folder</span>
						<span class="hidden md:inline">Projects</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isProjectsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{ block: isProjectsExpanded, hidden: !isProjectsExpanded }"
						class="pl-6"
					>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Project 1</a>
						</li>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Project 2</a>
						</li>
					</ul>
				</li>
				<li
					class="hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
				>
					<button
						type="button"
						class="flex items-center space-x-2 w-full h-full p-4"
						(click)="toggleDropdown('Applications')"
						(keypress)="toggleDropdown('Applications')"
					>
						<span class="material-icons">calendar_today</span>
						<span class="hidden md:inline">
							{{ 'Nav_Manager_Applications' | translate }}
						</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isApplicationsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{
							block: isApplicationsExpanded,
							hidden: !isApplicationsExpanded,
						}"
						class="pl-6"
					>
						<li
							class="p-2 hover:bg-gray-300 cursor-pointer"
							[routerLink]="['NewApplication']"
						>
							<a>{{ 'Nav_Manager_Applications_NewApplication' | translate }}</a>
						</li>
						<li
							class="p-2 hover:bg-gray-300 cursor-pointer"
							[routerLink]="['Calendar']"
						>
							<a>{{ 'Nav_Manager_Applications_Calendar' | translate }}</a>
						</li>
					</ul>
				</li>
				<li
					class="p-4 hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
				>
					<a href="#" class="flex items-center space-x-2">
						<span class="material-icons">description</span>
						<span class="hidden md:inline">Documents</span>
					</a>
				</li>
				<li
					class="p-4 hover:bg-gray-200 cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap"
				>
					<a href="#" class="flex items-center space-x-2">
						<span class="material-icons">bar_chart</span>
						<span class="hidden md:inline">Reports</span>
					</a>
				</li>
				<li class="absolute bottom-4 w-full text-ellipsis whitespace-nowrap">
					<a
						(mouseup)="toggleNotificationPanelVisible()"
						class="flex items-center space-x-2 p-4 hover:bg-gray-200 cursor-pointer"
					>
						<div class="relative flex items-center">
							<span class="material-icons align-middle"> notifications </span>
							<span
								*ngIf="unreadNotificationsCount > 0"
								class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center font-bold"
							>
								{{ unreadNotificationsCount }}
							</span>
						</div>
						<span class="hidden md:inline">
							{{ 'Nav_Manager_Notifications' | translate }}
						</span>
					</a>

					<div
						[hidden]="!isNotificationPanelVisible"
						class="absolute bottom-0 left-full ml-2 w-80 bg-white shadow-lg rounded-md z-[9999] p-0 max-h-[50vh] border-yellow-500"
					>
						<h3 class="font-bold w-full text-lg p-4 mb-4 bg-gray-50">Powiadomienia</h3>
						<ul class="p-4">
							<li class="mb-2">Powiadomienie 1</li>
							<li class="mb-2">Powiadomienie 2</li>
							<li class="mb-2">Powiadomienie 3</li>
						</ul>
						<button type="button" class="ml-4 text-sm text-blue-600 hover:underline">
							Wyczyść wszystkie
						</button>
					</div>
				</li>
			</ul>
		</nav>
	</div>

	<!-- Mobile Hamburger -->
	<div class="fixed bottom-4 left-4 md:hidden">
		<button
			(click)="toggleMenu()"
			class="p-2 bg-gray-200 rounded-full shadow-md max-w-10 max-h-10"
		>
			<span class="material-icons">menu</span>
		</button>
	</div>

	<!-- Mobile Menu -->
	<div
		[ngClass]="{ flex: isMenuOpen, hidden: !isMenuOpen }"
		class="fixed inset-0 bg-gray-50 z-50 flex-col"
	>
		<div class="p-4 flex items-center justify-between">
			<span class="font-bold text-xl">{{ 'Nav_Manager_Menu' | translate }}</span>
			<button
				(click)="toggleMenu()"
				class="p-2 bg-gray-200 rounded-full shadow-md max-w-10 max-h-10"
			>
				<span class="material-icons">close</span>
			</button>
		</div>
		<nav class="flex-1 overflow-y-auto">
			<ul>
				<li class="p-4 hover:bg-gray-200 cursor-pointer" [routerLink]="['Dashboard']">
					<a class="flex items-center space-x-2">
						<span class="material-icons">home</span>
						<span>{{ 'Nav_Manager_Dashboard' | translate }}</span>
					</a>
				</li>
				<li class="p-4 hover:bg-gray-200 cursor-pointer">
					<button
						class="flex items-center space-x-2 w-full h-full"
						(click)="toggleDropdown('Teams')"
					>
						<span class="material-icons">groups</span>
						<span>{{ 'Nav_Manager_Team' | translate }}</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isTeamsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{ block: isTeamsExpanded, hidden: !isTeamsExpanded }"
						class="pl-6"
					>
						<li
							class="p-2 hover:bg-gray-300 cursor-pointer"
							[routerLink]="['EmployeeList']"
						>
							<a>{{ 'Nav_Manager_Team_Employees' | translate }}</a>
						</li>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Team 2</a>
						</li>
					</ul>
				</li>
				<li class="p-4 hover:bg-gray-200 cursor-pointer">
					<button
						class="flex items-center space-x-2 w-full"
						(click)="toggleDropdown('Projects')"
					>
						<span class="material-icons">folder</span>
						<span>Projects</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isProjectsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{ block: isProjectsExpanded, hidden: !isProjectsExpanded }"
						class="pl-6"
					>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Project 1</a>
						</li>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Project 2</a>
						</li>
					</ul>
				</li>
				<li class="p-4 hover:bg-gray-200 cursor-pointer">
					<button
						class="flex items-center space-x-2 w-full"
						(click)="toggleDropdown('Applications')"
					>
						<span class="material-icons">calendar_today</span>
						<span>{{ 'Nav_Manager_Applications' | translate }}</span>
						<span
							class="ml-auto material-icons"
							[ngClass]="
								isApplicationsExpanded
									? 'rotate-180 transition-all duration-150'
									: 'rotate-0 transition-all duration-150'
							"
						>
							expand_more
						</span>
					</button>
					<ul
						[ngClass]="{
							block: isApplicationsExpanded,
							hidden: !isApplicationsExpanded,
						}"
						class="pl-6"
					>
						<li
							class="p-2 hover:bg-gray-300 cursor-pointer"
							[routerLink]="['Calendar']"
						>
							<a>{{ 'Nav_Manager_Applications_Calendar' | translate }}</a>
						</li>
						<li class="p-2 hover:bg-gray-300 cursor-pointer">
							<a href="#">Project 2</a>
						</li>
					</ul>
				</li>
				<li class="p-4 hover:bg-gray-200 cursor-pointer">
					<a href="#" class="flex items-center space-x-2">
						<span class="material-icons">description</span>
						<span>Documents</span>
					</a>
				</li>
				<li class="p-4 hover:bg-gray-200 cursor-pointer">
					<a href="#" class="flex items-center space-x-2">
						<span class="material-icons">bar_chart</span>
						<span>Reports</span>
					</a>
				</li>
			</ul>
		</nav>
		<div class="fixed bottom-4 w-full flex justify-center">
			<a href="#" class="flex items-center space-x-2 p-4 hover:bg-gray-200 cursor-pointer">
				<div class="relative">
					<span class="material-icons"> notifications </span>
					<span
						*ngIf="unreadNotificationsCount > 0"
						class="absolute -top-2 -right-2 text-[10px] md:text-xs bg-red-600 text-white rounded-full w-5 h-5 md:w-6 md:h-6 flex items-center justify-center"
					>
						{{ unreadNotificationsCount }}
					</span>
				</div>
			</a>
		</div>
	</div>
</div>
